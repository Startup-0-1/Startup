{% extends "core/base.html" %}

{% block content %}

{% if request.user.is_authenticated %}
    {% if request.user.role == "patient" %}
        <h1>Welcome, {{ request.user.get_display_name }}</h1>
    {% elif request.user.role == "doctor" %}
        <h1>Welcome, Dr. {{ request.user.get_display_name }}</h1>
    {% endif %}
    <p style="margin-top:0.4rem; color:#4b5563;">
        You are logged in as <strong>{{ request.user.role }}</strong>.
    </p>

    {% if request.user.role == "patient" %}
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h3>My Appointments</h3>
                <p>View all your upcoming and past consultations.</p>
                <a href="{% url 'patient-appointments' %}" class="button button-primary">
                    View Appointments
                </a>
            </div>
            <div class="dashboard-card">
                <h3>Request Appointment</h3>
                <p>Schedule a new consultation with a doctor.</p>
                <a href="{% url 'patient-appointment-create' %}" class="button button-outline">
                    Request Appointment
                </a>
            </div>
            <div class="dashboard-card">
                <h3>Payments</h3>
                <p>Pay your consultation fee securely.</p>
                <a href="{% url 'payment-page' %}" class="button button-outline">
                    Go to Payments
                </a>
            </div>
        </div>

    {% elif request.user.role == "doctor" %}
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h3>My Patients' Appointments</h3>
                <p>Review your upcoming and recent consultations.</p>
                <a href="{% url 'doctor-appointments' %}" class="button button-primary">
                    View Appointments
                </a>
            </div>
            <div class="dashboard-card">
                <h3>Admin Area</h3>
                <p>Access detailed records and user management (if enabled).</p>
                <a href="/admin/" class="button button-outline">
                    Django Admin
                </a>
            </div>
        </div>

    {% elif request.user.role == "admin" %}
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h3>System Admin</h3>
                <p>Manage users, appointments, documents, and payments.</p>
                <a href="/admin/" class="button button-primary">
                    Open Admin
                </a>
            </div>
        </div>
    {% endif %}

{% else %}
    <h1>Welcome to MedConsult</h1>
    <p>
        Secure medical consultancy platform with separate access for
        <strong>patients</strong>, <strong>doctors</strong>, and <strong>admins</strong>.
    </p>

    <div style="margin-top:1.5rem;">
        <a class="button button-primary" href="{% url 'login-page' %}">
            Log In
        </a>
        <a class="button button-outline" href="{% url 'signup-patient-page' %}" style="margin-left:0.75rem;">
            I'm a Patient
        </a>
        <a class="button button-outline" href="{% url 'signup-doctor-page' %}" style="margin-left:0.75rem;">
            I'm a Doctor
        </a>
    </div>
{% endif %}

{% endblock %}
